{% extends "base.html" %}


{#トピック本文#}
{% block content %}
  <h1>{{ topic.title }}</h1>

  <p style="font-size: 12px; color: #666;">
    {{ topic.category.get_type_display }} | {{ topic.created_at|date:"Y/m/d" }}
  </p>

  {% if topic.text %}
    <p>{{ topic.text|linebreaksbr }}</p>
  {% endif %}

  <hr>

  <p>
    <a href="{% url 'board:comment_create' topic.id %}">
      コメントを書く
    </a>
  </p>

  {# コメント一覧 #}
  <h2>コメント</h2>

  {% for c in comments %}
  <div id="comment-{{ c.sequence }}" style="padding:10px 0; border-bottom:1px solid #eee;">

    <div style="font-size:12px; color:#666;">
      #{{ c.sequence }}（{{ c.user.username }} / {{ c.created_at|date:"Y-m-d H:i" }}）
    </div>

    {% if c.parent_comment %}
      <div style="margin-top:4px;">
        <a href="#comment-{{ c.parent_comment.sequence }}"
           style="font-size:12px; color:#666; text-decoration:none;">
          >>>#{{ c.parent_comment.sequence }}
        </a>
      </div>
    {% endif %}

    <div style="margin-top:6px;">
      {% if c.is_deleted %}
        <span style="color:#999;">削除されました</span>
      {% else %}
        {{ c.text|linebreaksbr }}
      {% endif %}
    </div>

  </div>
{% empty %}
  <p>コメントはまだありません。</p>
{% endfor %}

  <p>
    <a href="{% url 'board:topic_list' %}">← 一覧へ戻る</a>
  </p>
{% endblock %}