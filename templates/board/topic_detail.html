{% extends "base.html" %}


{#ãƒˆãƒ”ãƒƒã‚¯æœ¬æ–‡#}
{% block content %}
  <h1>{{ topic.title }}</h1>

  <p style="font-size: 12px; color: #666;">
    {{ topic.category.get_type_display }} | {{ topic.created_at|date:"Y/m/d" }}
  </p>

  {% if topic.text %}
    <p>{{ topic.text|linebreaksbr }}</p>
  {% endif %}

{#ã€€ãƒˆãƒ”ãƒƒã‚¯ã‚¿ã‚°ã€€#}
{% if topic.tags.all %}
  <div style="margin-top:8px; font-size:12px;">
    {% for tag in topic.tags.all %}
      #{{ tag.name }}
    {% endfor %}
  </div>
{% endif %}

{#ã€€ãƒˆãƒ”ãƒƒã‚¯ã®ã„ã„ã­ã€€#}
<form method="post" action="{% url 'board:topic_like_toggle' topic.id %}" style="display:inline;">
  {% csrf_token %}
  <button type="submit" style="border:none;background:transparent;cursor:pointer;font-size:18px;">
    {% if is_topic_liked %}â¤ï¸{% else %}ğŸ¤{% endif %}
  </button>
</form>
<span>{{ topic_like_count }}</span>

  <hr>

 {#ã€€ã‚³ãƒ¡ãƒ³ãƒˆãƒªãƒ³ã‚¯ã€€#} 
  <p>
    <a href="{% url 'board:comment_create' topic.id %}">
      ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã
    </a>
  </p>

  {# ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ #}
  <h2>ã‚³ãƒ¡ãƒ³ãƒˆ</h2>

  {% for c in comments %}
  <div id="comment-{{ c.sequence }}" style="padding:10px 0; border-bottom:1px solid #eee;">

    <div style="font-size:12px; color:#666;">
      #{{ c.sequence }}ï¼ˆ{{ c.user.username }} / {{ c.created_at|date:"Y-m-d H:i" }}ï¼‰
    </div>

  {#ã€€ã‚³ãƒ¡ãƒ³ãƒˆã®ã„ã„ã­ã€€#}
  <div style="margin-top:4px;">
      <form method="post" action="{% url 'board:comment_like_toggle' c.id %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit" style="border:none;background:transparent;cursor:pointer;">
          {% if c.is_liked %}â¤ï¸{% else %}ğŸ¤{% endif %}
        </button>
      </form>
      <span style="font-size:12px; color:#666;">{{ c.like_count }}</span>
    </div>

  {#ã€€è¦ªå­ã‚³ãƒ¡ãƒ³ãƒˆã€€#}
    {% if c.parent_comment %}
      <div style="margin-top:4px;">
        <a href="#comment-{{ c.parent_comment.sequence }}"
           style="font-size:12px; color:#666; text-decoration:none;">
          >>>#{{ c.parent_comment.sequence }}
        </a>
      </div>
    {% endif %}

    <div style="margin-top:6px;">
      {% if c.is_deleted %}
        <span style="color:#999;">å‰Šé™¤ã•ã‚Œã¾ã—ãŸ</span>
      {% else %}
        {{ c.text|linebreaksbr }}
      {% endif %}
    </div>

  </div>
{% empty %}
  <p>ã‚³ãƒ¡ãƒ³ãƒˆã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
{% endfor %}

{#ä¸€è¦§ã¸ã€€ãƒªãƒ³ã‚¯#}
  <p>
    <a href="{% url 'board:topic_list' %}">â† ä¸€è¦§ã¸æˆ»ã‚‹</a>
  </p>
{% endblock %}