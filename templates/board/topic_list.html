{% extends "base.html" %}

{% block content %}
  <h1>ãµã‚Šã‹ãˆã‚Šåºƒå ´</h1>

  <!-- ãƒˆãƒ”ãƒƒã‚¯ä½œæˆï¼ˆä»®ï¼‰ -->
   <p>
    <a href="{% url 'board:topic_create' %}">ãƒˆãƒ”ãƒƒã‚¯ã‚’ä½œæˆ</a>
  </p>


  <!-- ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ– -->
  <div style="display:flex; gap:8px; margin:12px 0;">
  {% for value, label in categories %}
    <a href="{% url 'board:topic_list' %}?category={{ value }}"
       style="padding:6px 10px; border:1px solid #ccc; border-radius:16px;
              text-decoration:none;
              {% if selected_category == value|stringformat:'s' %}font-weight:bold;{% endif %}">
      {{ label }}
    </a>
  {% endfor %}
</div>


<!--äººæ°—ãƒ»æ–°ç€ä¸¦ã³æ›¿ãˆ-->
{% if not is_category_page %}
  <div style="display:flex; gap:8px; margin:12px 0;">
    <a href="{% url 'board:topic_list' %}?sort=popular"
       style="padding:6px 10px; border:1px solid #ccc; border-radius:16px;
              text-decoration:none;
              {% if sort == 'popular' %}font-weight:bold;{% endif %}">
      äººæ°—
    </a>
    <a href="{% url 'board:topic_list' %}?sort=new"
       style="padding:6px 10px; border:1px solid #ccc; border-radius:16px;
              text-decoration:none;
              {% if sort == 'new' %}font-weight:bold;{% endif %}">
      æ–°ç€
    </a>
  </div>
{% endif %}


  {% if topics %}
 <ul>
  {% for topic in topics %}
    <li>
      <a href="{% url 'board:topic_detail' topic.id %}">
        {{ topic.title }}
      </a>
      <div>{{ topic.category.get_type_display }}ï½œ{{ topic.created_at|date:"Y/m/d" }}</div>

    {#  ã„ã„ã­è¡¨ç¤ºã€€#}
    <form method="post" action="{% url 'board:topic_like_toggle' topic.id %}" style="display:inline;">
      {% csrf_token %}
    <button type="submit" style="border:none;background:transparent;cursor:pointer;">
    {% if topic.is_liked %}â¤ï¸{% else %}ğŸ¤{% endif %}
    </button>
  </form>
  <span style="font-size:12px; color:#666;">{{ t.like_count }}</span>
    
    </li>
  {% endfor %}
</ul>
  {% else %}
    <p>å…¬é–‹ä¸­ã®ãƒˆãƒ”ãƒƒã‚¯ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  {% endif %}
{% endblock %}